<div>
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h5 m-0">Partner</h2>
    <a class="btn btn-outline-secondary btn-sm" href="/app/partners">Back</a>
  </div>
  <div id="detail" class="mb-3"></div>
  <h3 class="h6">Addresses</h3>
  <div id="addresses"></div>
  <h3 class="h6 mt-3">Contacts</h3>
  <div id="contacts"></div>
</div>
<script>
(async function(){
  const id = parseInt(window.location.pathname.split('/').pop());
  const token = localStorage.getItem('accessToken');
  const res = await fetch(`/api/partners/partners/${id}/summary/`, { headers: { 'Authorization': `Bearer ${token}` } });
  if(!res.ok){ notify('Failed to load partner', 'error'); return; }
  const p = await res.json();
  document.getElementById('detail').innerHTML = `
    <div class="row g-2">
      <div class="col-md-4"><div class="card-like"><div class="small text-muted">Name</div><div class="fw-semibold">${p.name}</div></div></div>
      <div class="col-md-4"><div class="card-like"><div class="small text-muted">Type</div><div class="fw-semibold">${p.type}</div></div></div>
      <div class="col-md-4"><div class="card-like"><div class="small text-muted">Status</div><div class="fw-semibold">${p.status}</div></div></div>
    </div>`;
  document.getElementById('addresses').innerHTML = (p.addresses||[]).map(a=> `<div class="card-like mb-2">${a.line1}, ${a.city?.name || ''} - ${a.postal_code}</div>`).join('');
  document.getElementById('contacts').innerHTML = (p.contacts||[]).map(c=> `<div class="card-like mb-2">${c.name} ${c.email? '('+c.email+')':''}</div>`).join('');
})();
</script>
