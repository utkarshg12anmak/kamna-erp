<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Hub Contact Modal Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            padding: 20px;
            background-color: #f8f9fa;
        }
        .test-info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-info">
            <h1 class="h3 mb-3">üß™ CV Hub Contact Modal Layout Test</h1>
            <p class="mb-3">This page tests the contact modal layout to verify that the save/cancel buttons are properly positioned and visible.</p>
            <div class="alert alert-info">
                <strong>Test Instructions:</strong>
                <ol class="mb-0">
                    <li>Click "Open Contact Modal" below</li>
                    <li>Verify the modal opens properly</li>
                    <li>Check that Save and Cancel buttons are visible in the modal footer</li>
                    <li>Verify buttons are not cut off or out of bounds</li>
                    <li>Test form validation by trying to submit empty form</li>
                </ol>
            </div>
        </div>

        <button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#addContactModal">
            Open Contact Modal
        </button>

        <div class="mt-4">
            <h4>‚úÖ Expected Behavior:</h4>
            <ul>
                <li>Modal opens smoothly</li>
                <li>Save and Cancel buttons are visible in modal footer</li>
                <li>Form fields work properly</li>
                <li>Phone field accepts 8-10 digits only</li>
                <li>First name is required</li>
            </ul>
        </div>
    </div>

    <!-- Add Contact Modal (Fixed Version) -->
    <div class="modal fade" id="addContactModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Contact</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addContactForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="contact_first_name" class="form-label">First Name *</label>
                                <input type="text" class="form-control" id="contact_first_name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="contact_last_name" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="contact_last_name">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="contact_designation" class="form-label">Designation</label>
                            <select class="form-select" id="contact_designation">
                                <option value="CEO">Chief Executive Officer</option>
                                <option value="CFO">Chief Financial Officer</option>
                                <option value="CTO">Chief Technology Officer</option>
                                <option value="MANAGER">Manager</option>
                                <option value="ASSISTANT_MANAGER">Assistant Manager</option>
                                <option value="EXECUTIVE">Executive</option>
                                <option value="SENIOR_EXECUTIVE">Senior Executive</option>
                                <option value="ACCOUNTANT">Accountant</option>
                                <option value="SALES_MANAGER">Sales Manager</option>
                                <option value="PURCHASE_MANAGER">Purchase Manager</option>
                                <option value="DIRECTOR">Director</option>
                                <option value="PARTNER">Partner</option>
                                <option value="PROPRIETOR">Proprietor</option>
                                <option value="OTHER" selected>Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="contact_phone" class="form-label">Phone * (8-10 digits)</label>
                            <input type="tel" class="form-control" id="contact_phone" required maxlength="10" pattern="[0-9]{8,10}">
                            <div class="form-text">Enter 8-10 digits only</div>
                        </div>
                        <!-- NO EXTRA CLOSING DIV HERE - This was the bug! -->
                        <div class="mb-3">
                            <label for="contact_email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="contact_email">
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="contact_is_primary">
                            <label class="form-check-label" for="contact_is_primary">Set as Primary</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="testSaveContact()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function testSaveContact() {
            const firstName = document.getElementById('contact_first_name').value.trim();
            const phone = document.getElementById('contact_phone').value.trim();
            
            // Test validation
            if (!firstName) {
                alert('‚úÖ Validation Test: First name is required');
                return;
            }
            
            if (!phone) {
                alert('‚úÖ Validation Test: Phone number is required');
                return;
            }
            
            // Phone validation (8-10 digits)
            if (!/^[0-9]{8,10}$/.test(phone)) {
                alert('‚úÖ Validation Test: Phone number must be 8-10 digits');
                return;
            }
            
            alert('‚úÖ Success! Contact form validation is working correctly.');
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addContactModal'));
            modal.hide();
            
            // Clear form
            document.getElementById('addContactForm').reset();
        }

        // Test that modal opens properly
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ Contact modal test page loaded');
            
            // Add event listener to test modal functionality
            const modal = document.getElementById('addContactModal');
            modal.addEventListener('shown.bs.modal', function() {
                console.log('‚úÖ Contact modal opened successfully');
                
                // Check if buttons are visible
                const saveBtn = modal.querySelector('.btn-primary');
                const cancelBtn = modal.querySelector('.btn-secondary');
                
                if (saveBtn && cancelBtn) {
                    console.log('‚úÖ Save and Cancel buttons are present');
                    
                    // Check if buttons are visible (not hidden)
                    const saveVisible = saveBtn.offsetHeight > 0;
                    const cancelVisible = cancelBtn.offsetHeight > 0;
                    
                    console.log(`‚úÖ Save button visible: ${saveVisible}`);
                    console.log(`‚úÖ Cancel button visible: ${cancelVisible}`);
                } else {
                    console.error('‚ùå Save or Cancel buttons not found!');
                }
            });
        });
    </script>
</body>
</html>
